<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Chat</title>
  <link rel="stylesheet" href="/pages/sources/css/login.css">
  <link rel="stylesheet" href="/pages/sources/css/chat.css">
  <link rel="stylesheet" href="/pages/sources/css/contacts.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      width: 100%;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      display: flex;
      flex-direction: column;
    }
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      height: 100vh;
      display: flex;
      flex-direction: column;
      color: black;
      transition: background 0.3s, color 0.3s;
      font-size: 16px;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
      z-index: 2;
      width: 100%;
      height: 80px;
      background: #3a7ef5ff;
      color: white;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
 
  @media(max-width:600px){
    .user-pic { width:45px; height:45px; }
    .user-info h2 { font-size:1rem; }
    .user-info p { font-size:0.8rem; }
    .top-bar .title { font-size:1.1rem; }
  }
  </style>
</head>
<body>

  <!-- Login Page -->
  <div id="loginPage" style="display: block">
    <div class="top-bar-log">
      <p> Unity </p>
    </div>
  <div id="board">
    <form id="form">
    <h2>Login</h2>
    <input required type="number" class="inputs" id="phoneI" placeholder="Enter Phone Number">
    <input required type="password" class="inputs" id="passI" placeholder="Enter Password">
    <br>
    <div>
    <input type="checkbox"><b> Notify people I'm Online</b>
    </div>
    <button id="submit">Submit</button>
    <a id="link1" class="links" href="/pages/personalInfo.html">Forgot Password?</a>
    <a class="links" id="link2" href="/pages/signin.html">Sign Up</a>
    </form>

    <div style="display: none" id="msg">
      <div id="progC">
        <div id="prog1" class="prog">ğŸ”´</div>
        <div id="prog2" class="prog">ğŸŸ¢</div>
      </div>
      <p id="loginT">Logging in...</p>
      <h3 id="msgT">No text returned</h3>
    </div>
  </div>

  <!-- Bottom App Bar -->
  <div class="bottom-bar-log">
    <a href="#">â„¹ï¸ Info</a>
    <a href="#">ğŸ”Š Announcements</a>
    <a href="/pages/help.html">â” Help</a>
  </div>
</div>

<!--Contacts Page-->
<div id="contactsPage" style="display: none">
<div class="top-bar-cont">
  <div class="menu-btn" id="menuBtn" onclick="openMenu()">â˜°</div>
  <div class="title" id="contTitle">Chats</div>
</div>

<div class="search-bar">
  <input type="text" id="searchInput" placeholder="Global Search...">
</div>

<div id="userList"></div>

<div class="bottom-bar-cont">
  <div style="font-size: 2rem"onclick="friendsPage.style.display='none'; contactsPage.style.display='block'; inboxPage.style.display='none'">ğŸ </div>
  <div id="openFriends" onclick="openFriends()" style="position: relative;">
    ğŸ Likes
    <span id="interestsBadge">0</span>
  </div>
  <div id="openInbox" onclick="openInbox()" style="position: relative;">
    ğŸ“© Inbox
    <span id="inboxBadge">0</span>
  </div>
  <a href="#">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Rooms</a>
</div>

<div class="drawer" id="drawer">
  <h2>Settings</h2>
  <button onclick="{window.location.href='/pages/profileCentre.html'}">Profile Centre</button>
  <button onclick="{window.location.href='/pages/account.html'}">Account</button>
  <button id="openPolicy"   onclick="setupModal('openPolicy','PrivateInfo');">Private Policies</button>
  <button id="openAboutUs"   onclick="setupModal('openAboutUs','aboutUs')">About Us</button>
  <button onclick="logout()">Logout ğŸ”</button>
</div>
</div>

<!--Friends Page-->
<div id="friendsPage" style="display: none">
<div class="top-bar-cont">
  <div class="menu-btn" id="menuBtnF" onclick="openMenu()">â˜°</div>
  <div class="title" id="contTitleF" style="margin-right: 20%">ğŸ§§ Interests</div>
</div>

<div class="search-bar">
  <input type="text" id="searchInputF" placeholder="Search Friend...">
</div>

<div id="userListF"></div>

<div class="bottom-bar-cont">
  <div style="font-size: 2rem"onclick="friendsPage.style.display='none'; contactsPage.style.display='block'; inboxPage.style.display='none'">ğŸ </div>
  <div id="openFriendsF" onclick="openFriends()" style="position: relative;">
    ğŸ Likes
    <span id="interestsBadgeF">0</span>
  </div>
  
  <div id="openInboxF" onclick="openInbox()" style="position: relative;">
    ğŸ“© Inbox
    <span id="inboxBadgeF">0</span>
  </div>
  <a href="#">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Rooms</a>
</div>

<div class="drawer" id="drawerF">
  <h2>Settings</h2>
  <button onclick="{window.location.href='/pages/profileCentre.html'}">Profile Centre</button>
  <button onclick="{window.location.href='/pages/account.html'}">Account</button>
  <button id="openPolicyF"   onclick="setupModal('openPolicy','PrivateInfo');">Private Policies</button>
  <button id="openAboutUsF"   onclick="setupModal('openAboutUs','aboutUs')">About Us</button>
  <button onclick="logout()">Logout ğŸ”</button>
</div>
</div>

<!--Inbox Page-->
<div id="inboxPage" style="display: none">
<div class="top-bar-cont">
  <div class="menu-btn" id="menuBtnI" onclick="openMenu()">â˜°</div>
  <div class="title" id="contTitleI">Chats</div>
</div>

<div class="search-bar">
  <input type="text" id="searchInputI" placeholder="Global Search...">
</div>

<div id="inboxList"></div>

<div class="bottom-bar-cont">
  <div style="font-size: 2rem"onclick="friendsPage.style.display='none'; contactsPage.style.display='block'; inboxPage.style.display='none'">ğŸ </div>
  <div id="openFriendsI" onclick="openFriends()" style="position: relative;">
    ğŸ Likes
    <span id="interestsBadgeI">0</span>
  </div>
  <div id="openInboxI" onclick="openInbox()" style="position: relative;">
    ğŸ“© Inbox
    <span id="inboxBadgeI">0</span>
  </div>
  
  <a href="#">ğŸ§‘â€ğŸ¤â€ğŸ§‘ Rooms</a>
</div>

<div class="drawer" id="drawerI">
  <h2>Settings</h2>
  <button onclick="{window.location.href='/pages/profileCentre.html'}">Profile Centre</button>
  <button onclick="{window.location.href='/pages/account.html'}">Account</button>
  <button id="openPolicyI"   onclick="setupModal('openPolicy','PrivateInfo');">Private Policies</button>
  <button id="openAboutUsI"   onclick="setupModal('openAboutUs','aboutUs')">About Us</button>
  <button onclick="logout()">Logout ğŸ”</button>
</div>
</div>

<!-- Chat Page -->
   <span id="chatPage" style="display: none">
  <div class="top-bar">
    <div style="display: flex; align-items: center;">
      <div class="settings-btn" id="settings">â˜°</div>
      <div class="user-info">
        <h2 id="nameinfo"></h2>
        <p id="phoneinfo"></p>
      </div>
    </div>
    <div id="pic"></div>
    <div class="dropdown" id="dropdown">
      <button onclick="toggleDarkMode()">ğŸŒ™ Dark Theme</button>
      <button onclick="openModal()">âš™ï¸ Background</button>
      <button id="connected">ğŸ›œ See who is connected</button>
      <button id="profileInfoBtn">ğŸ‘¤ Profile Info</button>

      <button onclick="exit()">âŒ Exit chat</button>
    </div>
  </div>

  <div class="chat-container" id="chat">
  </div>
  <div class="chat-input">
    <input type="text" id="message" placeholder="Type a message..." />
    <button id="sendbtn">â¤</button>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h3>Settings</h3>
      <label>ğŸ¨ Background Color</label><br>
      <input type="color" onchange="changeBackgroundColor(this.value)"><br>
      <label>ğŸ–¼ Background Picture</label><br>
      <input type="file" accept="image/*" onchange="uploadBackground(event)"><br>
      <button class="close-btn" onclick="closeModal()">Close</button>
    </div>
  </div>

  <!-- Profile Picture Zoom Modal -->
  <div class="pic-modal" id="picModal" onclick="closePicModal()">
  </div>
</span>

<div id="OnlineInfo" id="modal2" class="modal2">
  <div class="modal-content2">
    <span id="closemodal" class="close">&times;</span>
    <h2>Who's Online</h2>
    <ol id="onlineList"></ol>
  </div>
</div>

<!-- âœ¨ Private Policies Modal -->
<div id="PrivateInfo" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

    <h2 style="font-size:2rem; color:#00c6ff; text-align:center; margin-bottom:20px;">Private Policies</h2>

    <div style="font-family:'Segoe UI', sans-serif; color:#fff; background:#111; padding:25px; border-radius:16px; line-height:1.8; animation: fadeIn 0.5s ease;">
      <h3 style="color:#00c6ff; text-align:center; margin-bottom:15px;">Unity Privacy Policy</h3>
      <h4 style="color:#00c6ff; text-align:center;">(scroll down for more...)</h4>

      <p style="font-size: 1rem; margin-bottom:15px;">
        We respect your privacy with 
        <strong>end-to-end encryption</strong> and <strong>self-encryption</strong>.
      </p>

      <p style="font-size:1rem; margin-bottom:15px;">The System...</p>

      <ol style="padding-left:25px; font-size:1rem; margin-bottom:15px;">
        <li style="margin-bottom:10px;">May collect minimal account info and device metadata.</li>
        <li style="margin-bottom:10px;">Uses data only to deliver messages and improve service.</li>
        <li style="margin-bottom:10px;">Never sells personal data; only shares with essential service providers if required.</li>
        <li style="margin-bottom:10px;">You control your end-to-end encryption, profile visibility, and account deletion.</li>
      </ol>

      <hr style="border-color:#333; margin:20px 0;">

      <p style="text-align:center; font-size:1rem; color:#aaa;">
        Contact: <strong>amanikbt1@gmail.com</strong>
      </p>
    </div>
  </div>
</div>


<!-- About Us Modal -->
<div id="aboutUs" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>

    <h2 style="font-size:2rem; color:#00c6ff; text-align:center; margin-bottom:20px;">About Us</h2>

    <div style="font-family:'Segoe UI', sans-serif; color:#fff; background:#111; padding:25px; border-radius:16px; line-height:1.8; animation: fadeIn 0.5s ease;">
      <h3 style="color:#00c6ff; text-align:center; margin-bottom:15px;">Unity App</h3>

      <p>Unity was developed by <strong>Amani Kibet Kesir & Rick</strong>, Moi University students passionate about tech and global communication. Unity was built to help people worldwide make authentic connections â€” easily, privately, and totally free.</p>

      <p><b>Our mission:</b> to create a space where anyone on the globe can chat, discover, and interact â€” no paywalls, no fuss. Connection should be simple, fun, and accessible to everyone.</p>

      <p><b>How we built Unity:</b> We gathered feedback and ideas from students across Moi Universityâ€™s colleges to understand what users truly want from a chat platform â€” then turned those insights into real features you see today.</p>

      <div style="margin-top:20px;">
        <h4 style="margin-bottom:8px; color: white;">Reach Us</h4>
        <a class="btnInfo" href="mailto:amanikbt1@gmail.com">ğŸ“© Email Amani</a>
        <a class="btnInfo" href="https://wa.me/254703819232" target="_blank" rel="noopener">â˜ï¸ Chat on WhatsApp</a>
      </div>

      <hr style="border-color:#333; margin:20px 0;">

      <p style="font-size:1.1rem; margin-bottom:20px;">
        Please share the link with your friends to grow Unityâ€™s global community:
        <a href="https://unity-developers.onrender.com/" style="color:#00c6ff; text-decoration:underline;">https://unity-developers.onrender.com/</a>
      </p>

      <p style="text-align:center; font-size:1rem; color:#aaa;">
        Contact: <strong>amanikbt1@gmail.com</strong>
      </p>
    </div>
  </div>
</div>

<div id="popup" class="popup"></div>

<script src="/socket.io/socket.io.js"></script>
<script src="/pages/sources/js/login.js"></script>
<script src="/pages/sources/js/contacts.js"></script>
<script src="/pages/sources/js/chat.js"></script>
  <script>

    function setupModal(triggerId, modalId) {
  const trigger = document.getElementById(triggerId);
  const modal = document.getElementById(modalId);
  const closeBtn = modal.querySelector(".close");

  trigger.onclick = () => { modal.style.display = "block"; };
  closeBtn.onclick = () => { modal.style.display = "none"; };
  window.addEventListener("click", e => { if(e.target === modal) modal.style.display = "none"; });
}

  </script>
</body>
</html>
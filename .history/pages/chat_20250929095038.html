<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>Chat</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    html, body {
      height: 100%;
      width: 100%;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, cyan, lightblue);
      overflow: hidden;
    }
    body {
      margin: 0;
      font-family: "Poppins", sans-serif;
      background: linear-gradient(135deg, #667eea, #764ba2);
      height: 100vh;
      display: flex;
      flex-direction: column;
      color: #333;
      transition: background 0.3s, color 0.3s;
      font-size: 16px;
    }

    /* Top bar */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      position: relative;
      z-index: 2;
      width: 100%;
      height: 80px;
      background: #3a7ef5ff;
      color: white;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }

    /* Login Page */
    #loginPage {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 0 2%;
      position: relative;
      top: 5%;
      left: 1%
    }
    #board {
      width: 100%;
      max-width: 600px;
      display: flex;
      flex-direction: column;
      align-items: center;
      flex: 1;
      overflow-y: auto;
      padding: 2rem 0;
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      background: rgba(13, 221, 141, 0.95);
      animation: fadein 1s ease-in-out;
    }
    .top-bar-log {
      width: 100%;
      height: 50px;
      background: #2575fc;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    .bottom-bar-log {
      width: 100%;
      height: 55px;
      background: #2575fc;
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-around;
      font-size: 1rem;
      border-bottom-left-radius: 12px;
      border-bottom-right-radius: 12px;
    }

    .bottom-bar-log a {
      color: white;
      text-decoration: none;
      font-weight: bold;
      transition: 0.3s;
    }

    .bottom-bar-log a:hover {
      color: yellow;
    }
    h2 {
      color: red;
      font-size: clamp(2rem, 6vw, 4rem);
      margin-bottom: 2rem;
      text-align: center;
    }

    .inputs {
      width: 90%;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 10px;
      font-size: clamp(1rem, 3vw, 1.5rem);
      background-color: rgba(186, 247, 245, 1);
      border: none;
      outline: 2px solid #ccc;
      transition: 0.3s;
    }

    .inputs:focus {
      outline: 3px solid #2575fc;
      background-color: #ffffffff;
    }

    #submit {
      background: rgba(216, 202, 13, 1);;
      width: 70%;
      padding: 1rem;
      margin-top: 2rem;
      border-radius: 20px;
      font-size: clamp(1rem, 3vw, 1.5rem);
      font-weight: bold;
      border: none;
      cursor: pointer;
      transition: 0.3s;
      outline: 1px groove red;
    }

    #submit:hover {
      background: linear-gradient(90deg, #feb47b, #ff7e5f);
      transform: scale(1.05);
    }

    .links {
      margin-top: 2rem;
      font-weight: 800;
      font-size: clamp(1rem, 3vw, 1.2rem);
      color: rgba(206, 12, 245, 1);
      text-decoration: none;
      transition: 0.3s;
    }

    .links:hover {
      color: yellow;
    }

    #msg{
      background: lightblue;
      width: 18rem;
      height: 18rem;
      border-radius: 10px;
      position: absolute;
      bottom: 16rem;
      left: 3rem;
      outline: 2px groove yellow;
      display: none;
      z-index: 20;
  
    }
    .prog{
      width: 3rem;
      height: 3rem;
      border-radius: 40px;
      position: absolute;
      top: 2rem;
      left: 4.5rem;
      outline: 10px groove yellow;
      font-size: 40px;
    }
    #prog2{
        transform: rotateY(90deg)
    }
    #progC{
      transform-style: preserve-3d;
      animation: spin 4s ease-in-out infinite;
    }
    #msgT{
      position: relative;
      top: 6rem;
      left: 1rem;
      color: blue;
      font-weight: 500;
      font-size: large;
      width: 12rem;
      height: 50px;
    }
    #loginT{
      position: relative;
      top: 6rem;
      left: 1rem;
      color: rgb(255, 60, 0);
      font-weight: 500;
      font-size: large;
      width: 12rem;
      height: 50px;
    }

    @keyframes fadein {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Chat Page */

    .user-info h2 {
      margin: 0;
      font-size: 1.2rem;
      color: #ffffffff;
    }

    .user-info p {
      margin: 2px 0 0;
      font-size: 1rem;
      color: #d0f8fcff;
    }

    .profile-pic {
      width: 65px;
      height: 65px;
      border-radius: 50%;
      background: cyan;
      background-size: cover;
      border: 2px solid #eee;
      cursor: pointer;
    }

    .settings-btn {
      font-size: 1.4rem;
      cursor: pointer;
      margin-right: 10px;
    }

    .dropdown {
      position: absolute;
      top: 60px;
      left: 15px;
      background: #e9f8f7ff;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      overflow: hidden;
      display: none;
      flex-direction: column;
      width: 180px;
      z-index: 5;
    }

    .dropdown button {
      border: none;
      padding: 12px 15px;
      text-align: left;
      font-size: 1rem;
      cursor: pointer;
      width: 100%;
      transition: background 0.2s;
      outline: 2px groove #f0f0f0d0;
    }

    .dropdown button:hover { background: #f0f0f0; }

    /* Chat container */
.chat-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  padding: 18px 15px;
  overflow-y: auto;
  background-color: #5fffffff;
  height: 76vh;
}
#chatPage{
  display: none;
}
    .chat-bubble {
      max-width: 80%;
      padding: 14px 18px;
      margin: 10px 0;
      border-radius: 16px;
      font-size: 1rem;
      line-height: 1.4;
      word-wrap: break-word;
    }

    .chat-left {
      background: #f1f1f1;
      align-self: flex-start;
      border-top-left-radius: 1px;
    }

    .chat-right {
      background: #602ceeff;
      color: #fff;
      align-self: flex-end;
      border-top-right-radius: 1px;
    }

    /* Chat input */
    .chat-input {
      display: flex;
      padding: 12px 15px;
      background: #3a7ef5ff;
      border-top: 1px solid #ddd;
    }

    .chat-input input {
      flex: 1;
      padding: 14px 16px;
      border: 1px solid #070000ff;
      border-radius: 20px;
      outline: none;
      font-size: 1rem;
      background-color:#ddd
    }

    .chat-input button {
      margin-left: 10px;
      padding: 14px 20px;
      border: none;
      border-radius: 50%;
      background: #05c7adff;
      color: #fff;
      font-size: 1.2rem;
      cursor: pointer;
      transition: 0.2s;
    }

    .chat-input button:hover { background: #3d90ddff; }

    /* Dark theme */
    body.dark {
      background: #1e1e1e;
      color: #ddd;
    }
    body.dark .top-bar { background: #2c2c2c; color: #ddd; }
    body.dark .dropdown { background: #2c2c2c; color: #ddd; }
    body.dark .chat-left { background: #333; color: #ddd; }
    body.dark .chat-right { background: #444; }

    /* Settings modal */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 20;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      width: 90%;
      max-width: 350px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    }

    .close-btn {
      background: #667eea;
      color: #fff;
      border: none;
      padding: 10px 16px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
    }

    /* Neon typing indicator */
    .typing-indicator {
      background-color: black;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 3px solid transparent;
      border-top: 4px solid #00ffe0;
      border-right: 4px solid #ff00ff;
      border-bottom: 6px solid #00ff88;
      border-left: 6px solid #ffea00;
      animation: spin 1.2s linear infinite, neon-glow 1.5s ease-in-out infinite alternate;
      margin: 10px 0;
      align-self: flex-start;
    }

    @keyframes spin {
      0% { transform: rotateY(0deg) rotateX(0deg); }
      50% { transform: rotateY(360deg) rotateX(60deg); }
      100% { transform: rotateY(0deg) rotateX(0deg); }
    }
    @keyframes neon-glow {
      0%{box-shadow:0 0 8px #0ff,0 0 15px #0ff;}
      100%{box-shadow:0 0 20px #f0f,0 0 40px #ff0;}
    }

    /* Profile pic zoom modal */
    .pic-modal {
      display: none;
      position: fixed;
      top:0; left:0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.7);
      justify-content: center;
      align-items: center;
      z-index: 50;
      animation: fadeIn 0.3s ease;
    }
    .pic-modal img {
      max-width: 80%;
      max-height: 80%;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0,0,0,0.5);
      transform: scale(0.5);
      animation: zoomIn 0.4s forwards;
    }
    @keyframes fadeIn { from{background:rgba(0,0,0,0);} to{background:rgba(0,0,0,0.7);} }
    @keyframes zoomIn { from{transform:scale(0.3);opacity:0;} to{transform:scale(1);opacity:1;} }
    @keyframes zoomOut { from{transform:scale(1);opacity:1;} to{transform:scale(0.3);opacity:0;} }

  </style>
</head>
<body>

  <!-- Login Page -->
  <div id="loginPage">
    <div class="top-bar-log">Unity</div>
  <div id="board">
    <h2>Login</h2>
    <input type="number" class="inputs" id="phoneI" placeholder="Enter Phone Number">
    <input type="password" class="inputs" id="passI" placeholder="Enter Password">
    <button id="submit" onclick="f1()">Submit</button>
    <a id="link1" class="links" href="http://localhost:3000">Forgot Password?</a>
    <a class="links" id="link2" href="/pages/signup/signIn.html">Sign Up</a>

    <div id="msg">
      <div id="progC">
        <div id="prog1" class="prog">üî¥</div>
        <div id="prog2" class="prog">üü¢</div>
      </div>
      <p id="loginT">Logging in...</p>
      <h3 id="msgT">No text returned</h3>
    </div>
  </div>

  <!-- Bottom App Bar -->
  <div class="bottom-bar-log">
    <a href="#">üè† Home</a>
    <a href="#">üîç Search</a>
    <a href="#">‚öô Settings</a>
  </div>
</div>


  <!-- Chat Page -->
   <span id="chatPage">
  <div class="top-bar">
    <div style="display: flex; align-items: center;">
      <div class="settings-btn" onclick="toggleDropdown()">‚ò∞</div>
      <div class="user-info">
        <h2 id="name">Amani Kibet</h2>
        <p id="phone">+254 712 345 678</p>
      </div>
    </div>
    <div class="profile-pic" id="profilePic"></div>

    <div class="dropdown" id="dropdown">
      <button onclick="toggleDarkMode()">üåô Dark Theme</button>
      <button onclick="openModal()">‚öôÔ∏è Settings</button>
    </div>
  </div>

  <!-- Chat Container -->
  <div class="chat-container" id="chat">
    <div class="chat-bubble chat-left">Hey, welcome to your chat!</div>
    <div class="chat-bubble chat-right">Thanks, it looks cool üòé</div>
  </div>

  <!-- Chat Input -->
  <div class="chat-input">
    <input type="text" id="message" placeholder="Type a message..." />
    <button onclick="sendMessage()">‚û§</button>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <h3>Settings</h3>
      <label>üé® Pick Background Color</label><br>
      <input type="color" onchange="changeBackgroundColor(this.value)"><br>
      <label>üñº Upload Background</label><br>
      <input type="file" accept="image/*" onchange="uploadBackground(event)"><br>
      <button class="close-btn" onclick="closeModal()">Close</button>
    </div>
  </div>

  <!-- Profile Picture Zoom Modal -->
  <div class="pic-modal" id="picModal" onclick="closePicModal()">
    <img id="modalImg" src="https://i.pravatar.cc/100" alt="Profile Picture">
  </div>
</span>

  <script>
    //Login Page
  let bt1= document.getElementById("submit")
  let msgT= document.getElementById("msgT")
  let msg= document.getElementById("msg")
  let phoneC= document.getElementById("phoneI");
  let passC= document.getElementById("passI")
  let loginPage= document.getElementById("loginPage");
  let profilePic= document.getElementById("profilePic");

function f1(){
  let phoneI= document.getElementById("phoneI").value;
  let passI= document.getElementById("passI").value;

  fetch("/path4",{
    method: "POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({phone: `${phoneI}`, pass: `${passI}`})
  })
  .then(type=> type.json())
  .then(data=>{
    if(data.name=="Null"){
      phoneC.style.color="red";
      phoneC.type="text";
      phoneC.value+=" Is Not Found";

      setTimeout(()=>{
        phoneC.style.color="blue";
        phoneC.type="number";
      }, 5000);
    } else
    {
      msg.style.display="block";
      msgT.innerHTML=`Welcome Back ${data.name}!`;
      setTimeout(()=>{
        loginPage.style.display="none";
        chatPage.style.display="block";
      }, 8000);
    }

    //Chat Page Inside Data
    profilePic.style.background= "url('pictures/p1.png')";
    console.log(pictures/p1.png)
    function toggleDropdown() { const dropdown = document.getElementById("dropdown"); dropdown.style.display = dropdown.style.display==="flex"?"none":"flex"; }
    function toggleDarkMode() { document.body.classList.toggle("dark"); }
    function openModal() { document.getElementById("modal").style.display="flex"; document.getElementById("dropdown").style.display="none"; }
    function closeModal() { document.getElementById("modal").style.display="none"; }
    function changeBackgroundColor(color) { document.body.style.background=color; }
    function uploadBackground(event) {
      const file = event.target.files[0];
      if(file){
        const reader = new FileReader();
        reader.onload = function(e){
          document.body.style.background = `url(${e.target.result}) no-repeat center/cover`;
          document.body.style.backgroundSize = "cover";
        }
        reader.readAsDataURL(file);
      }
    }

    // Typing effect for bot
    function typeMessage(text, container){
      let i = 0;
      const interval = setInterval(()=>{
        container.innerText += text.charAt(i);
        i++;
        if(i === text.length) clearInterval(interval);
      },50);
    }

    function sendMessage(){
      const input = document.getElementById("message");
      const text = input.value.trim();
      if(text==="") return;

      const chat = document.getElementById("chat");

      // User bubble
      const bubble = document.createElement("div");
      bubble.className = "chat-bubble chat-right";
      bubble.innerText = text;
      chat.appendChild(bubble);
      chat.scrollTop = chat.scrollHeight;
      input.value = "";

      // Neon typing indicator
      const typing = document.createElement("div");
      typing.className = "typing-indicator";
      chat.appendChild(typing);
      chat.scrollTop = chat.scrollHeight;

      setTimeout(()=>{
        typing.remove();
        const reply = document.createElement("div");
        reply.className = "chat-bubble chat-left";
        chat.appendChild(reply);
        typeMessage("Got it üëç", reply);
        chat.scrollTop = chat.scrollHeight;
      }, 1500);
    }

    // Profile pic zoom modal
    const profilePic = document.querySelector(".profile-pic");
    const picModal = document.getElementById("picModal");
    const modalImg = document.getElementById("modalImg");

    profilePic.addEventListener("click", ()=>{
      const bg = profilePic.style.backgroundImage.replace(/url\((['"])?(.*?)\1\)/,'$2');
      modalImg.src = bg;
      picModal.style.display = "flex";
    });

    function closePicModal(){
      const img = document.querySelector("#picModal img");
      img.style.animation = "zoomOut 0.3s forwards";
      setTimeout(()=>{
        picModal.style.display = "none";
        img.style.animation = "zoomIn 0.4s forwards";
      }, 300);
    }
  });
}
  </script>
</body>
</html>